<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/JacksonTian/loader#readme"

    >loader (v2.1.1)</a>
</h1>
<h4>Assets loader.</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.loader">module loader</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.loader">
            function <span class="apidocSignatureSpan"></span>loader
            <span class="apidocSignatureSpan">(js, css)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.file">
            function <span class="apidocSignatureSpan">loader.</span>file
            <span class="apidocSignatureSpan">(target)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">loader.</span>loader.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loader.loader">module loader.loader</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.loader.loader">
            function <span class="apidocSignatureSpan">loader.</span>loader
            <span class="apidocSignatureSpan">(js, css)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.loader.file">
            function <span class="apidocSignatureSpan">loader.loader.</span>file
            <span class="apidocSignatureSpan">(target)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loader.loader.prototype">module loader.loader.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.loader.prototype.css">
            function <span class="apidocSignatureSpan">loader.loader.prototype.</span>css
            <span class="apidocSignatureSpan">(href)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.loader.prototype.dev">
            function <span class="apidocSignatureSpan">loader.loader.prototype.</span>dev
            <span class="apidocSignatureSpan">(prefix)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.loader.prototype.done">
            function <span class="apidocSignatureSpan">loader.loader.prototype.</span>done
            <span class="apidocSignatureSpan">(CDNMap, prefix, mini)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.loader.prototype.js">
            function <span class="apidocSignatureSpan">loader.loader.prototype.</span>js
            <span class="apidocSignatureSpan">(src)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loader.loader.prototype.pro">
            function <span class="apidocSignatureSpan">loader.loader.prototype.</span>pro
            <span class="apidocSignatureSpan">(CDNMap, prefix)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loader" id="apidoc.module.loader">module loader</a></h1>


    <h2>
        <a href="#apidoc.element.loader.loader" id="apidoc.element.loader.loader">
        function <span class="apidocSignatureSpan"></span>loader
        <span class="apidocSignatureSpan">(js, css)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loader = function (js, css) {
  if (!(this instanceof Loader)) {
    return new Loader(js, css);
  }

  var target = {};
  if (js) {
    target[path.extname(js)] = js;
  }

  if (css) {
    target[path.extname(css)] = css;
  }

  this.script = {
    assets: [],
    target: target[&#x22;.js&#x22;]
  };
  this.style = {
    assets: [],
    target: target[&#x22;.css&#x22;]
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loader.file" id="apidoc.element.loader.file">
        function <span class="apidocSignatureSpan">loader.</span>file
        <span class="apidocSignatureSpan">(target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">file = function (target) {
  return new File(target);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loader.loader" id="apidoc.module.loader.loader">module loader.loader</a></h1>


    <h2>
        <a href="#apidoc.element.loader.loader.loader" id="apidoc.element.loader.loader.loader">
        function <span class="apidocSignatureSpan">loader.</span>loader
        <span class="apidocSignatureSpan">(js, css)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loader = function (js, css) {
  if (!(this instanceof Loader)) {
    return new Loader(js, css);
  }

  var target = {};
  if (js) {
    target[path.extname(js)] = js;
  }

  if (css) {
    target[path.extname(css)] = css;
  }

  this.script = {
    assets: [],
    target: target[&#x22;.js&#x22;]
  };
  this.style = {
    assets: [],
    target: target[&#x22;.css&#x22;]
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loader.loader.file" id="apidoc.element.loader.loader.file">
        function <span class="apidocSignatureSpan">loader.loader.</span>file
        <span class="apidocSignatureSpan">(target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">file = function (target) {
  return new File(target);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loader.loader.prototype" id="apidoc.module.loader.loader.prototype">module loader.loader.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.loader.loader.prototype.css" id="apidoc.element.loader.loader.prototype.css">
        function <span class="apidocSignatureSpan">loader.loader.prototype.</span>css
        <span class="apidocSignatureSpan">(href)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">css = function (href) {
  this.style.assets.push(href);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```
View:
```html
&#x3c;%- Loader(&#x22;/assets/scripts/jqueryplugin.js&#x22;, &#x22;/assets/styles/jqueryplugin.css&#x22;)
  .js(&#x22;/assets/scripts/lib/jquery.jmodal.js&#x22;)
  .js(&#x22;/assets/scripts/lib/jquery.mousewheel.js&#x22;)
  .js(&#x22;/assets/scripts/lib/jquery.tagsphere.js&#x22;)
  .<span class="apidocCodeKeywordSpan">css</span>(&#x22;/assets/styles/jquery.autocomplate.css&#x22;)
  .done(assetsMap, prefix, combo) %&#x3e;
```

在[loader-builder](https://github.com/JacksonTian/loader-builder)/[loader-connect](https://github.com/JacksonTian/loader-connect)/[
loader-koa](https://github.com/JacksonTian/loader-koa)的支持下，`.js`方法也可以加载`.coffee`、`.es`类型的文件，`.css`方法可以加载`.less`、`.styl`文件。

### 环境判别
环境判别由`done`方法的第三个参数决定，如果传入combo值，将决定选用线下版本还是线上版本。如果不传入第三个参数，将由环境变量。如下代码实现：
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loader.loader.prototype.dev" id="apidoc.element.loader.loader.prototype.dev">
        function <span class="apidocSignatureSpan">loader.loader.prototype.</span>dev
        <span class="apidocSignatureSpan">(prefix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dev = function (prefix) {
  var html = &#x27;&#x27;;
  prefix = prefix || &#x27;&#x27;;
  var version = &#x27;?v=&#x27; + timestamp;

  var i;
  for (i = 0; i &#x3c; this.script.assets.length; i++) {
    html += &#x27;&#x3c;script src=&#x22;&#x27; + prefix + this.script.assets[i] + version + &#x27;&#x22;&#x3e;&#x3c;/script&#x3e;\n&#x27;;
  }
  for (i = 0; i &#x3c; this.style.assets.length; i++) {
    html += &#x27;&#x3c;link rel=&#x22;stylesheet&#x22; href=&#x22;&#x27; + prefix + this.style.assets[i] + version + &#x27;&#x22; media=&#x22;all&#x22; /&#x3e;\n&#x27;;
  }

  return html;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loader.loader.prototype.done" id="apidoc.element.loader.loader.prototype.done">
        function <span class="apidocSignatureSpan">loader.loader.prototype.</span>done
        <span class="apidocSignatureSpan">(CDNMap, prefix, mini)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">done = function (CDNMap, prefix, mini) {
  // 优先级：1. 参数传入 2. 全局
  CDNMap = CDNMap || Loader.CDNMap || {};

  // prefix: 1. 参数传入 2. this.prefix 3. 全局
  if (prefix === undefined) { // 可能传入 &#x27;&#x27;
    prefix = this.prefix;
  }

  if (prefix === undefined) {
    prefix = Loader.prefix;
  }

  if (prefix &#x26;&#x26; prefix.endsWith(&#x27;/&#x27;)) {
    prefix = prefix.slice(0, -1);
  }

  // mode
  var mode;
  if (mini !== undefined) { // 可能传入 0
    mode = mini;
  } else if (this.mini !== undefined) {
    mode = this.mini;
  } else if (Loader.mini !== undefined) {
    mode = Loader.mini;
  } else {
    mode = process.env.NODE_ENV === &#x22;production&#x22;;
  }

  return mode ? this.pro(CDNMap, prefix) : this.dev(prefix);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
View:
```html
&#x3c;%- Loader(&#x22;/assets/scripts/jqueryplugin.js&#x22;, &#x22;/assets/styles/jqueryplugin.css&#x22;)
  .js(&#x22;/assets/scripts/lib/jquery.jmodal.js&#x22;)
  .js(&#x22;/assets/scripts/lib/jquery.mousewheel.js&#x22;)
  .js(&#x22;/assets/scripts/lib/jquery.tagsphere.js&#x22;)
  .css(&#x22;/assets/styles/jquery.autocomplate.css&#x22;)
  .<span class="apidocCodeKeywordSpan">done</span>(assetsMap, prefix, combo) %&#x3e;
```

在[loader-builder](https://github.com/JacksonTian/loader-builder)/[loader-connect](https://github.com/JacksonTian/loader-connect)/[
loader-koa](https://github.com/JacksonTian/loader-koa)的支持下，`.js`方法也可以加载`.coffee`、`.es`类型的文件，`.css`方法可以加载`.less`、`.styl`文件。

### 环境判别
环境判别由`done`方法的第三个参数决定，如果传入combo值，将决定选用线下版本还是线上版本。如果不传入第三个参数，将由环境变量。如下代码实现：
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loader.loader.prototype.js" id="apidoc.element.loader.loader.prototype.js">
        function <span class="apidocSignatureSpan">loader.loader.prototype.</span>js
        <span class="apidocSignatureSpan">(src)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">js = function (src) {
  this.script.assets.push(src);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
res.render(tpl, {
  Loader: require(&#x27;loader&#x27;)
});
```
View:
```html
&#x3c;%- Loader(&#x22;/assets/scripts/jqueryplugin.js&#x22;, &#x22;/assets/styles/jqueryplugin.css&#x22;)
  .<span class="apidocCodeKeywordSpan">js</span>(&#x22;/assets/scripts/lib/jquery.jmodal.js&#x22;)
  .js(&#x22;/assets/scripts/lib/jquery.mousewheel.js&#x22;)
  .js(&#x22;/assets/scripts/lib/jquery.tagsphere.js&#x22;)
  .css(&#x22;/assets/styles/jquery.autocomplate.css&#x22;)
  .done(assetsMap, prefix, combo) %&#x3e;
```

在[loader-builder](https://github.com/JacksonTian/loader-builder)/[loader-connect](https://github.com/JacksonTian/loader-connect)/[
loader-koa](https://github.com/JacksonTian/loader-koa)的支持下，`.js`方法也可以加载`.coffee`、`.es`类型的文件，`.css`方法可以加载`.less`、`.styl`文件。
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loader.loader.prototype.pro" id="apidoc.element.loader.loader.prototype.pro">
        function <span class="apidocSignatureSpan">loader.loader.prototype.</span>pro
        <span class="apidocSignatureSpan">(CDNMap, prefix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pro = function (CDNMap, prefix) {
  prefix = prefix || &#x27;&#x27;;
  var html = &#x27;&#x27;;
  var scriptTarget = this.script.target;
  if (scriptTarget &#x26;&#x26; CDNMap[scriptTarget]) {
    html += &#x27;&#x3c;script src=&#x22;&#x27; + prefix + CDNMap[scriptTarget] + &#x27;&#x22;&#x3e;&#x3c;/script&#x3e;\n&#x27;;
  }
  var styleTarget = this.style.target;
  if (styleTarget &#x26;&#x26; CDNMap[styleTarget]) {
    html += &#x27;&#x3c;link rel=&#x22;stylesheet&#x22; href=&#x22;&#x27; + prefix + CDNMap[styleTarget]  + &#x27;&#x22; media=&#x22;all&#x22; /&#x3e;\n&#x27;;
  }

  return html;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
